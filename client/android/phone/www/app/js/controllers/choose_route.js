/**
 *
 * @author Schubert Generated Code</br>
 * Date Created: </br>
 * @since  </br>
 build:   </p>
 *
 * code was generated by the Schubert System </br>
 * Schubert system Copyright - NewPortBay LLC copy_right_range</br>
 * The generated code is free to use by anyone</p>
 *
 *
 *
 */

app.controller('choose_route', ['$scope', '$rootScope', '$location', '$state', '$window', '$q', '$http', '$ionicPopup', 'RestURL', 'Settings','surveyService','$timeout','surveyService','surveyFactory',
    function ($scope, $rootScope, $location, $state, $window, $q, $http, $ionicPopup, RestURL,Settings, surveyService,$timeout,surveyService,surveyFactory) {
        var self = $scope;
        self.routesList ={};
        self.init = function(){
          console.log("--------choose route----");
          //var URL = 'http://localhost:8080/SurveyBuilder/Route/get_all_route_for_desktop';
          var URL=RestURL.baseURL+'Route/get_all_route_for_desktop';
      	$http({method: 'GET', url: URL
	        })
            .success(function(result){ 
				console.log( "Getting all Route List---" +JSON.stringify(result));	
				self.routesList = result;
				console.log("-------------choose route value---"+angular.toJson(self.routesList));
			})
	        .error(function (error, status){
				console.log(error+status); 
			});
        };
        
        
        
        self.getStoreByRouteId = function(route){
        	console.log("-----------routes-----------"+angular.toJson(route));
        	var URL=RestURL.baseURL+'Store/get_all_store_by_route_id/'+route.id;
         	$http({method: 'GET', url: URL
   	        })
               .success(function(result){
   				console.log( "Storeslisted by  Route ID---" +JSON.stringify(result));	
   				surveyService.routesList= result;
   				$location.url('/choose-store');
   				console.log("Listing Store by route ID  completed ");									
   			})
   	        .error(function (error, status){
   				console.log(error+status); 
   			});
         	           
           
        };
        
        
        
        
        self.init();
}]);